---
layout: post
title: Improved UBC Transcript
permalink: posts/improved-ubc-transcript
---

You can read more about how it works <a class="colour-link" href="https://github.com/arashout/ubcapi">here</a>
Drag the below bookmarklet to your bookmark bar and click them when you are on the SSC grades page:
<ul class="with-bullets">
    <li>
        <a class="colour-link" href="javascript:(function(){"use strict";const COL_INDEX=Object.freeze({COURSE_CODE:0,LETTER_GRADE:3,STANDING:10});function replaceNbsps(str){const re=new RegExp(String.fromCharCode(160),'g');return str.replace(re,'');}function formatGradeSummary(iframeDocument){['#UbcHeaderWrapper','#UbcBottomInfoWrapper','#UbcUtilNavWrapper'].forEach(function(n){document.querySelector(n).remove();});['#calculator_title','#calculator_title_text','.ui-tabs-nav'].forEach(function(n){iframeDocument.querySelector(n).remove();});iframeDocument.querySelector('h1').setAttribute('style','margin:10px 0 -20px 70px;');iframeDocument.querySelector('#header-invisible img').setAttribute('style','margin-bottom: 15px;');iframeDocument.querySelector('#tabs').setAttribute('style','margin: 0px auto; width:800px');}const iframe=document.querySelector('#iframe-main').contentWindow.document;formatGradeSummary(iframe);const tableElement=iframe.querySelector('#allSessionsGrades');const tableBody=tableElement.children[0];const tableRows=tableBody.children;const n=tableRows.length;let courseList=[];for(let i=tableRows.length-1;i>=0;i--){let row=tableRows[i];row.removeChild(row.children[COL_INDEX.STANDING]);const cellLetterGrade=row.children[COL_INDEX.LETTER_GRADE];const letterGrade=cellLetterGrade.innerText;if(letterGrade===''){tableBody.removeChild(row);continue;}const cellCourseCode=row.children[COL_INDEX.COURSE_CODE];const courseCode=replaceNbsps(cellCourseCode.innerText);courseList.push(courseCode);let cellCourseName=row.insertCell(1);cellCourseName.style.textAlign='center';if(i===0){cellCourseName.innerText='Course Name';cellCourseName.classList.add('listHeader');}else{cellCourseName.id=courseCode;cellCourseName.classList.add('listRow');}}const apiEndpoint='https://arashout.pythonanywhere.com/courses';let completeURL=apiEndpoint+'?';for(let i=0;i<courseList.length;i++){const courseCode=courseList[i];if(courseCode!==''&&courseCode!=='Course'){completeURL+=`c${i}=${courseCode}&`;}}fetch(completeURL,{method:'GET',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},mode:'cors',}).then((response)=>{return response.json();}).catch((reason)=>{console.log(reason);}).then((courseMap)=>{courseList.forEach((courseCode)=>{const cellCourseName=iframe.getElementById(courseCode);cellCourseName.innerText=courseMap[courseCode];});});})();">
        Improved UBC Transcript Bookmarklet 
        </a> &larr; DRAG THIS
        <ul class="with-bullets">
            <li>Note: This bookmarklet will not be able to fetch course names if <a class="colour-link" href="https://arashout.pythonanywhere.com/"> this site</a> is offline </li>
        </ul>
    </li>\
</ul>
