---
layout: post
title: Improved UBC Transcript
permalink: posts/improved-ubc-transcript
---

You can read more about how it works <a class="colour-link" href="https://github.com/arashout/ubcapi">here</a><br>
Drag the below bookmarklet to your bookmark bar and click them when you are on the SSC grades page:
<ul class="with-bullets">
    <li>
        <a class="colour-link" href="'use strict';const VERSION='1.0',VERSION_KEY='version_key',URL_SOURCE='http://arashout.site/posts/improved-ubc-transcript',COL_INDEX_RETRIEVAL=Object.freeze({COURSE_CODE:0,LETTER_GRADE:3}),COL_INDEX_REMOVAL=Object.freeze({SECTION:1,STANDING:10});function replaceNbsps(a){const b=/Â /g;return a.replace(b,'')}function formatGradeSummary(a){['#UbcHeaderWrapper','#UbcBottomInfoWrapper','#UbcUtilNavWrapper'].forEach(function(b){document.querySelector(b).remove()}),['#calculator_title','#calculator_title_text','.ui-tabs-nav'].forEach(function(b){a.querySelector(b).remove()}),a.querySelector('h1').setAttribute('style','margin:10px 0 -20px 70px;'),a.querySelector('#header-invisible img').setAttribute('style','margin-bottom: 15px;'),a.querySelector('#tabs').setAttribute('style','margin: 0px auto; width:800px')}const iframe=document.querySelector('#iframe-main').contentWindow.document;formatGradeSummary(iframe);const tableElement=iframe.querySelector('#allSessionsGrades'),tableBody=tableElement.children[0],tableRows=tableBody.children,n=tableRows.length;let courseList=[];for(let b,a=tableRows.length-1;0<=a;a--){b=tableRows[a];const c=b.children[COL_INDEX_RETRIEVAL.LETTER_GRADE],d=c.innerText;if(''===d){tableBody.removeChild(b);continue}const e=b.children[COL_INDEX_RETRIEVAL.COURSE_CODE],f=replaceNbsps(e.innerText);''!==f&&'Course'!==f&&courseList.push(f),b.removeChild(b.children[COL_INDEX_REMOVAL.STANDING]),b.removeChild(b.children[COL_INDEX_REMOVAL.SECTION]);let g=b.insertCell(1);g.style.textAlign='center',0===a?(g.innerText='Course Name',g.classList.add('listHeader')):(g.id=f,g.classList.add('listRow'))}let queryString='';for(let a=0;a<courseList.length;a++){const b=courseList[a];queryString+=`c${a}=${b}&`}queryString+=`${VERSION_KEY}=${VERSION}`;const apiEndpoint='https://arashout.pythonanywhere.com/courses',completeURL=apiEndpoint+'?'+queryString;fetch(completeURL,{method:'GET',headers:{Accept:'application/json, text/plain, */*','Content-Type':'application/json'},mode:'cors'}).then(a=>{return a.json()}).catch(a=>{console.log(a)}).then(a=>{a[VERSION_KEY]!==VERSION&&alert(`
            You do not have the latest version of the bookmarklet which means it may not
            work properly or you may be missing new features.\n
            Get the latest version from:\n${URL_SOURCE}\n\n
            Version: ${VERSION}\tNewest Version: ${a[VERSION_KEY]}
            `),courseList.forEach(b=>{const c=iframe.getElementById(b);c.innerText=a[b]})});">
        Improved UBC Transcript Bookmarklet 
        </a> &larr; DRAG THIS
        <ul class="with-bullets">
            <li>Note: This bookmarklet will not be able to fetch course names if <a class="colour-link" href="https://arashout.pythonanywhere.com/"> this site</a> is offline </li>
        </ul>
    </li>
</ul>
