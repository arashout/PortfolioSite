---
layout: post
title: Improved UBC Transcript
permalink: posts/improved-ubc-transcript
---

<h1>Instructions</h1>
<ol class="with-bullets">
    <li>
        Ensure <a class="colour-link" href="https://arashout.pythonanywhere.com/">this page</a> is online (Won't work otherwise) 
    </li>
    <li>
        Drag --><a class="colour-link" href="'use strict';const VERSION='1.2',VERSION_KEY='version_key',URL_SOURCE='http://arashout.site/posts/improved-ubc-transcript',COL_INDEX_RETRIEVAL=Object.freeze({COURSE_CODE:0,LETTER_GRADE:3}),COL_INDEX_REMOVAL=Object.freeze({SECTION:1,STANDING:10}),BIT_FLAGS=Object.freeze({KEEP_NO_GRADE_ROW:1,KEEP_SECTION_COLUMN:2,KEEP_STANDING_COLUMN:4});function replaceNbsps(a){const b=/Â /g;return a.replace(b,'')}function formatGradeSummary(a){['#UbcHeaderWrapper','#UbcBottomInfoWrapper','#UbcUtilNavWrapper'].forEach(function(b){document.querySelector(b).remove()}),['#calculator_title','#calculator_title_text','.ui-tabs-nav'].forEach(function(b){a.querySelector(b).remove()}),a.querySelector('h1').setAttribute('style','margin:10px 0 -20px 70px;'),a.querySelector('#header-invisible img').setAttribute('style','margin-bottom: 15px;'),a.querySelector('#tabs').setAttribute('style','margin: 0px auto; width:800px')}function getUserChoice(a){return{removeNoGradeRow:!(a&BIT_FLAGS.KEEP_NO_GRADE_ROW),removeSectionColumn:!(a&BIT_FLAGS.KEEP_SECTION_COLUMN),removeStandingColumn:!(a&BIT_FLAGS.KEEP_STANDING_COLUMN)}}const iframe=document.querySelector('#iframe-main').contentWindow.document;formatGradeSummary(iframe);const tableElement=iframe.querySelector('#allSessionsGrades'),tableBody=tableElement.children[0],tableRows=tableBody.children,n=tableRows.length;let courseList=[];const promptMessage=`
        001: Keep courses with no grades\n
        010: Keep the section column\n
        100: Keep the standing column\n
        0: Default behaviour (Remove all clutter)\n
        e.g Type 011 to enable the first 2 options
        `,bitmaskString=prompt(promptMessage,'0'),bitmask=parseInt(bitmaskString,2),userChoice=getUserChoice(bitmask);console.log(userChoice);for(let a=tableRows.length-1;0<=a;a--){const b=tableRows[a];console.log(b);const c=b.children[COL_INDEX_RETRIEVAL.LETTER_GRADE],d=c.innerText;if(userChoice.removeNoGradeRow&&''===d){tableBody.removeChild(b);continue}const e=b.children[COL_INDEX_RETRIEVAL.COURSE_CODE],f=replaceNbsps(e.innerText);''!==f&&'Course'!==f&&courseList.push(f),console.log(b.children[COL_INDEX_REMOVAL.SECTION]),console.log(b.children[COL_INDEX_REMOVAL.STANDING]),userChoice.removeStandingColumn&&b.removeChild(b.children[COL_INDEX_REMOVAL.STANDING]),userChoice.removeSectionColumn&&b.removeChild(b.children[COL_INDEX_REMOVAL.SECTION]);let g=b.insertCell(1);g.style.textAlign='center',0===a?(g.innerText='Course Name',g.classList.add('listHeader')):(g.id=f,g.classList.add('listRow'))}let queryString='';for(let a=0;a<courseList.length;a++){const b=courseList[a];queryString+=`c${a}=${b}&`}queryString+=`${VERSION_KEY}=${VERSION}`;const apiEndpoint='https://arashout.pythonanywhere.com/courses',completeURL=apiEndpoint+'?'+queryString;fetch(completeURL,{method:'GET',headers:{Accept:'application/json, text/plain, */*','Content-Type':'application/json'},mode:'cors'}).then(a=>{return a.json()}).catch(a=>{console.log(a)}).then(a=>{a[VERSION_KEY]!==VERSION&&alert(`
            You do not have the latest version of the bookmarklet which means it may not
            work properly or you may be missing new features.\n
            Get the latest version from:\n${URL_SOURCE}\n\n
            Version: ${VERSION}\tNewest Version: ${a[VERSION_KEY]}
            `),courseList.forEach(b=>{const c=iframe.getElementById(b);c.contentEditable='true',c.innerText=a[b]})});">UBCBeautifier</a> onto your bookmarks bar
    </li>
    <li>Navigate to the <a class="colour-link" href="https://ssc.adm.ubc.ca/sscportal/servlets/SRVSSCFramework?function=SessGradeRpt">SSC grades page</a></li>
    <li>Click on the bookmark to run it</li>
</ol>

<a class="colour-link" href="https://github.com/arashout/ubcapi">Source Code</a><br>